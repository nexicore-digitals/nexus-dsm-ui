/* 1. Import Inter Font (Modern, clean UI font) */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
@import 'tailwindcss';
@plugin '@tailwindcss/typography';

/*
 * Nexus DSM UI: Global Application Stylesheet (app.css)
 * * This file sets up global styles and defines CSS Custom Properties
 * that are overridden dynamically by the theme store logic in $lib/stores/theme.ts.
 */

/* 2. Base CSS Reset */
*,
*::before,
*::after {
	box-sizing: border-box;
}

/* 3. Global CSS Custom Properties (Fallbacks and structure) */
/* These are the variables injected by the theme store in src/lib/stores/theme.ts */
:root {
	/* Core Colors (Fallback to Dark Theme defaults if JS fails) */
	--color-background: #1e1e1e;
	--color-foreground: #d4d4d4;
	--color-editor: #1e1e1e;

	/* Structural Colors */
	--color-sidebar: #252526;
	--color-activityBar: #333333;
	--color-statusBar: #007acc;

	/* Functional Colors */
	--color-border: #3e3e42;
	--color-primary: #007acc; /* Used for buttons, active elements */
	--color-secondary: #2d2d30;
	--color-muted: #969696;
	--color-accent: #0098ff; /* High-contrast highlights */
	--color-tabActive: #1e1e1e;
	--color-tabInactive: #2d2d30;
	--color-input: #3c3c3c;

	/* Global Typography */
	font-family: 'Inter', sans-serif;
	font-size: 16px;
	line-height: 1.5;
}

/* 4. Global Body and HTML Styling */
html,
body {
	margin: 0;
	padding: 0;
	/* Apply the main colors from the variables set above/by the theme store */
	background-color: var(--color-background);
	color: var(--color-foreground);
	/* Ensure the application takes up the full viewport */
	height: 100%;
	width: 100%;
	overflow: hidden; /* Prevent body scrollbars, as layout is managed by the main component */
	transition:
		background-color 0.2s,
		color 0.2s; /* Smooth theme transitions */
}

/* 5. Utility Styles for Components */

/* General border style for UI divisions */

.ui-border {
	border-color: var(--color-border);
}
.ui-border {
	border-color: var(--color-border);
}

/* Text color for muted elements (like descriptions or inactive text) */
.text-muted {
	color: var(--color-muted);
}

/* Text color for primary actions/links */
.text-primary {
	color: var(--color-primary);
}

/* 6. Component Base Styles (For the Theme Selector and Buttons) */

.theme-switcher {
	display: flex;
	align-items: center;
	gap: 8px;
}

.theme-switcher label {
	color: var(--color-foreground);
	font-size: 0.875rem; /* Small font size for UI elements */
	white-space: nowrap;
}

.theme-switcher select {
	/* Color and Background */
	background-color: var(--color-input);
	color: var(--color-foreground);
	border: 1px solid var(--color-border);

	/* Layout and Spacing */
	padding: 4px 8px;
	border-radius: 4px;
	min-width: 150px;

	/* Appearance Overrides */
	appearance: none; /* Hide default OS dropdown arrow */
	-webkit-appearance: none;
	-moz-appearance: none;
	cursor: pointer;
	line-height: 1.25rem;

	/* Smooth Transition */
	transition:
		border-color 0.15s ease-in-out,
		background-color 0.15s ease-in-out;
}

.theme-switcher select:hover {
	border-color: var(--color-primary);
}

.theme-switcher select:focus {
	outline: none;
	border-color: var(--color-accent);
	box-shadow: 0 0 0 1px var(--color-accent);
}

/* --- BUTTON STYLES --- */

/* Base Button Style (For secondary/default actions) */
.btn {
	padding: 6px 12px;
	border-radius: 4px;
	font-size: 0.875rem;
	font-weight: 500;
	cursor: pointer;
	text-align: center;
	display: inline-flex;
	align-items: center;
	justify-content: center;

	/* Colors derived from theme */
	background-color: var(--color-secondary);
	color: var(--color-foreground);
	border: 1px solid var(--color-border);

	/* Transitions for smooth interaction */
	transition:
		background-color 0.2s,
		border-color 0.2s;
}

.btn:hover {
	background-color: var(
		--color-secondary
	); /* Slightly darker or lighter secondary color depending on theme */
	border-color: var(--color-primary);
}

.btn:active {
	background-color: var(--color-primary);
	color: var(--color-foreground); /* Ensure text remains visible */
}

/* Primary Button Style (For 'Run Validation', 'Save', or 'Deploy') */
.btn-primary {
	background-color: var(--color-primary);
	color: #ffffff; /* Use a fixed light color for high contrast on primary buttons */
	border-color: var(--color-primary);
}

.btn-primary:hover {
	/* Slightly darker/lighter primary color or a secondary accent effect */
	background-color: var(--color-accent);
	border-color: var(--color-accent);
}

.btn:disabled,
.btn-primary:disabled {
	opacity: 0.5;
	cursor: not-allowed;
	filter: grayscale(1);
}

/* 7. Application Layout Structure (VS Code Inspired Grid) */

/* The main container in +layout.svelte should use this class */
.app-grid {
	display: grid;
	/* Defines the column structure:
       1. Activity Bar (e.g., 50px)
       2. Sidebar (e.g., 250px, variable width)
       3. Main Content Area (1fr) 
    */
	grid-template-columns: min-content min-content 1fr;
	/* Defines the row structure:
       1. Main Area (1fr) - Contains the Editor Header and the Editor itself
       2. Status Bar (e.g., 22px) - The bottom bar
    */
	grid-template-rows: 1fr min-content;
	height: 100vh;
}

.activity-bar {
	grid-column: 1 / 2;
	grid-row: 1 / 2;
	background-color: var(--color-activityBar);
	border-right: 1px solid var(--color-border);
	width: 50px;
	z-index: 10; /* Ensure it is above the sidebar border */
}

.sidebar-panel {
	/* This width needs to be controlled by Svelte state for collapsing */
	grid-column: 2 / 3;
	grid-row: 1 / 2;
	background-color: var(--color-sidebar);
	border-right: 1px solid var(--color-border);
	min-width: 0;
	width: 250px;
	overflow-y: auto;
	z-index: 5;
}

.main-content {
	grid-column: 3 / 4;
	grid-row: 1 / 2;
	background-color: var(--color-editor);
	overflow: hidden;
	display: flex;
	flex-direction: column; /* To stack tabs/toolbar above the editor area */
}

/* The horizontal bar at the very bottom */
.status-bar {
	grid-column: 1 / -1; /* Spans all columns (Activity, Sidebar, Editor) */
	grid-row: 2 / 3;
	background-color: var(--color-statusBar);
	color: var(--color-foreground);
	height: 22px;
	padding: 0 10px;
	display: flex;
	align-items: center;
	font-size: 0.8rem;
	z-index: 10;
}

/*
  The following keyframes and custom utilities are necessary to enable
  the 'animate-in', 'slide-in', 'fade-out', and 'zoom-in' classes
  used by the MenubarContent and similar primitives derived from Radix/Shadcn.
*/

/* --- 2. Custom Keyframes for Smooth UI Transitions --- */

/* Fades */
@keyframes fade-in {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}
@keyframes fade-out {
	from {
		opacity: 1;
	}
	to {
		opacity: 0;
	}
}

/* Zooms (Used with zoom-in-95 / zoom-out-95) */
@keyframes zoom-in {
	from {
		transform: scale(0.95);
	}
	to {
		transform: scale(1);
	}
}
@keyframes zoom-out {
	from {
		transform: scale(1);
	}
	to {
		transform: scale(0.95);
	}
}

/* Slides (Used with slide-in-from-top-2 / slide-in-from-bottom-2, etc.) */
@keyframes slide-in-from-top {
	from {
		transform: translateY(-0.5rem);
	} /* 2 = 0.5rem in Tailwind spacing scale */
	to {
		transform: translateY(0);
	}
}
@keyframes slide-in-from-bottom {
	from {
		transform: translateY(0.5rem);
	}
	to {
		transform: translateY(0);
	}
}
@keyframes slide-in-from-left {
	from {
		transform: translateX(-0.5rem);
	}
	to {
		transform: translateX(0);
	}
}
@keyframes slide-in-from-right {
	from {
		transform: translateX(0.5rem);
	}
	to {
		transform: translateX(0);
	}
}

/* --- 3. Custom Utilities to Map Keyframes to Tailwind Classes --- */
@layer utilities {
	/* Base Animation Timing (used by animate-in/out) */
	.animate-in {
		animation-duration: 200ms;
		animation-fill-mode: forwards;
		animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
	}
	.animate-out {
		animation-duration: 150ms;
		animation-fill-mode: forwards;
		animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
	}

	/* Mapping the specific transition types */
	.fade-in-0 {
		animation-name: fade-in;
	}
	.fade-out-0 {
		animation-name: fade-out;
	}
	.zoom-in-95 {
		animation-name: zoom-in;
	}
	.zoom-out-95 {
		animation-name: zoom-out;
	}

	.data-\[side\=bottom\]\:slide-in-from-top-2[data-side='bottom'] {
		animation-name: slide-in-from-top;
	}
	.data-\[side\=top\]\:slide-in-from-bottom-2[data-side='top'] {
		animation-name: slide-in-from-bottom;
	}
	.data-\[side\=left\]\:slide-in-from-right-2[data-side='left'] {
		animation-name: slide-in-from-right;
	}
	.data-\[side\=right\]\:slide-in-from-left-2[data-side='right'] {
		animation-name: slide-in-from-left;
	}
}
